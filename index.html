<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ Safari de Sonidos y Nombres ğŸš€</title>
    <link rel="stylesheet" href="styles.css"> 
</head>
<body onload="window.cargarPerfiles()">

   <div id="pantalla-inicio">
        <div class="bg-deco" style="top: 5%; left: 5%; font-size: 150px; animation-delay: 0s;">ğŸŒ¿</div>
        <div class="bg-deco" style="top: 15%; right: 10%; font-size: 100px; animation-delay: 2s;">ğŸ¾</div>
        <div class="bg-deco" style="bottom: 10%; left: 15%; font-size: 120px; animation-delay: 1s; transform: rotate(-20deg);">ğŸŒ´</div>
        <div class="bg-deco" style="bottom: 20%; right: 5%; font-size: 140px; animation-delay: 3s;">ğŸŒ¿</div>
        <div class="bg-deco" style="top: 50%; left: -5%; font-size: 80px; opacity: 0.1;">ğŸ¾</div>
        <div class="bg-deco" style="top: 40%; right: -5%; font-size: 90px; opacity: 0.1;">ğŸŒ´</div>
        <div class="inicio-contenedor">
            <div class="deco-animal" style="top: -30px; left: -20px; transform: rotate(-15deg);">ğŸ’</div>
            <div class="deco-animal" style="top: -30px; right: -20px; transform: rotate(15deg);">ğŸ¦œ</div>
            <div class="deco-animal" style="bottom: -20px; left: 10px;">ğŸŒ¿</div>
            <div class="deco-animal" style="bottom: -20px; right: 10px;">ğŸŒ¿</div>

            <h1 style="line-height: 1.1; margin-bottom: 10px;">
                <span style="font-size: 0.6em; color: #FFD166;">ğŸŒŸ BIENVENIDO AL ğŸŒŸ</span><br>
                <span style="color: #FF6F61; font-size: 1.2em; text-shadow: 4px 4px 0 #4A4E69;">SAFARI DE</span><br>
                <span style="color: #4A4E69;">SONIDOS ğŸ¦</span>
            </h1>
            
            <p style="color: #888; margin-bottom: 25px;">Â¡Aprende jugando!</p>
        
            <button class="btn-google" onclick="window.loginConGoogle()">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="G">
                Continuar con Google
            </button>

            <div class="separador-o">
                <span>O JUEGA AQUÃ</span>
            </div>

            <div id="contenedor-select">
                <select id="select-perfil" class="select-personalizado" onchange="window.seleccionarPerfil()">
                    </select>
                <a id="btn-eliminar-perfil" onclick="window.eliminarPerfil()">ğŸ—‘ï¸ Borrar este explorador</a>
            </div>

            <input type="text" id="input-nombre-nuevo" placeholder="Escribe tu nombre..." maxlength="12" style="display: none;">
            
    <button class="btn-comenzar" onclick="window.verificarInicio()">Â¡A JUGAR! â–¶</button>        </div>
    </div>

    <div id="modal-historia" class="modal-overlay" style="display:none; z-index: 30000;">
    <div class="modal-content comic-reader">
        <button onclick="window.saltarHistoria()" class="btn-cerrar-comic">âœ–</button>
        
        <div class="comic-imagen-container">
            <img id="comic-img" src="" alt="Escena historia" class="comic-img-animada">
        </div>

        <div class="comic-texto-container">
            <p id="comic-texto">...</p>
            
            <div class="comic-controles">
                <button id="btn-repetir-audio" onclick="window.repetirAudioHistoria()">ğŸ”Š Repetir</button>
                <button id="btn-comic-siguiente" onclick="window.siguientePasoHistoria()">CONTINUAR â¡</button>
            </div>
        </div>
    </div>
</div>

    <div id="modal">
        <div class="modal-content">
            <h1 style="font-size: 50px;">ğŸ‰</h1>
            <h2 id="modal-titulo">Â¡Nivel Superado!</h2>
            <p id="modal-puntos">Puntos obtenidos en el nivel: 50</p>
            <button class="btn-comenzar" onclick="window.siguiente()">CONTINUAR</button>
        </div>
    </div>

    <div id="modal-ranking" style="display:none;" class="modal-overlay"> 
        <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
            <h2 style="color: #6C5CE7; font-family: 'Luckiest Guy';">ğŸŒ TOP EXPLORADORES</h2>
            <p style="font-size: 0.9em; color: #888;">Los mejores del mundo</p>
            
            <ul id="lista-ranking" style="list-style: none; padding: 0; text-align: left; margin-top: 20px;">
                </ul>
            
            <button class="btn-comenzar" onclick="document.getElementById('modal-ranking').style.display='none'" style="font-size: 1.2em; padding: 10px 30px; margin-top: 20px;">CERRAR</button>
        </div>
    </div>

    <div id="modal-tienda" style="display:none;" class="modal-overlay">
    <div class="modal-content" style="max-width: 700px;">
        <h2 style="color: #FF6F61; font-family: 'Luckiest Guy';">ğŸª TIENDA & COLECCIÃ“N</h2>
        
        <div class="tabs-tienda">
            <button class="tab-btn activa" onclick="window.cambiarTabTienda('avatares')">ğŸ¤  Avatares</button>
            <button class="tab-btn" onclick="window.cambiarTabTienda('peluches')">ğŸ§¸ Peluches</button>
        </div>

        <div style="background: #FFF9E9; padding: 10px; border-radius: 15px; margin: 10px 0; font-weight: bold; color: #B08D55;">
            Tus Bellotas: <span id="tienda-saldo" style="font-size: 1.5em;">0</span> ğŸŒ°
        </div>

        <div id="grid-avatares" class="grid-tienda"></div>
        
        <div id="grid-peluches" class="grid-tienda" style="display:none;"></div>

        <button class="btn-comenzar" onclick="document.getElementById('modal-tienda').style.display='none'" style="margin-top: 20px;">CERRAR</button>
    </div>
    </div>

    <div id="modal-confirmacion" class="modal-overlay" style="display:none; z-index: 20000;">
    <div class="modal-content" style="max-width: 400px; border: 5px solid #FF6F61;">
        <h2 style="color: #FF6F61; margin-bottom: 10px;">Â¿ESTÃS SEGURO?</h2>
        <p id="texto-confirmacion" style="font-size: 1.3em; color: #555; margin-bottom: 25px;">...</p>
        
        <div style="display: flex; gap: 15px; justify-content: center;">
            <button onclick="window.cerrarConfirmacion()" 
                    style="background: #E0E0E0; color: #555; border:none; padding: 10px 20px; border-radius: 15px; font-weight:bold; cursor:pointer; font-size:1em;">
                CANCELAR
            </button>
            <button id="btn-confirmar-si" 
                    style="background: #2ECC71; color: white; border:none; padding: 10px 20px; border-radius: 15px; font-weight:bold; cursor:pointer; font-size:1em; box-shadow: 0 4px 0 #27AE60;">
                Â¡SÃ, QUIERO!
            </button>
        </div>
    </div>
    </div>


    <div id="toast-container">

    </div>

    <div class="contenedor-principal" id="juego" style="display: none;">
        
        <div id="sidebar">
            <div class="perfil-card">
                <div class="avatar-container">
                    <div class="avatar-circle">ğŸ¤ </div>
                    <div class="nivel-badge" id="rango-jugador">Novato</div>
                </div>
                
                <h2 id="nombre-jugador">JUGADOR</h2>
                
                <div class="stats-row">
                    <div class="stat-pill" title="Experiencia">
                        â­ <span id="sidebar-xp">0</span>
                    </div>
                    <div class="stat-pill" title="Bellotas">
                        ğŸŒ° <span id="sidebar-bellotas">0</span>
                    </div>
                </div>
            </div>

            <div class="seccion-acciones">
                <p class="titulo-seccion">MENÃš</p>
                <button class="btn-ranking" onclick="window.mostrarRanking()">
                    ğŸ† Ranking Mundial
                </button>
                <button class="btn-tienda" onclick="window.abrirTienda()">
                    ğŸª Tienda & ColecciÃ³n
                </button>
                <div id="btn-menu-principal" onclick="window.volverAlMenu()">
                    â¬…ï¸ Cambiar Perfil
                </div>
            </div>

            <hr class="sidebar-divider">

            <div class="seccion-mapas">
                <p class="titulo-seccion">MAPAS</p>
                
                <div class="categoria-btn desbloqueada" id="cat-granja" onclick="window.cambiarCategoria('granja')">
                    <span>ğŸ¡ Granja</span>
                    <div class="estrellas" id="star-granja">â˜†â˜†â˜†</div>
                </div>
                <div class="categoria-btn" id="cat-mar" onclick="window.cambiarCategoria('mar')">
                    <span>ğŸŒŠ Mar ğŸ”’</span>
                    <div class="estrellas" id="star-mar">â˜†â˜†â˜†</div>
                </div>
                <div class="categoria-btn" id="cat-selva" onclick="window.cambiarCategoria('selva')">
                    <span>ğŸ¦ Selva ğŸ”’</span>
                    <div class="estrellas" id="star-selva">â˜†â˜†â˜†</div>
                </div>
                <div class="categoria-btn" id="cat-desierto" onclick="window.cambiarCategoria('desierto')">
                    <span>ğŸœï¸ Desierto ğŸ”’</span>
                    <div class="estrellas" id="star-desierto">â˜†â˜†â˜†</div>
                </div>
                 <div class="categoria-btn" id="cat-artico" onclick="window.cambiarCategoria('artico')">
                    <span>ğŸ§Š Ãrtico ğŸ”’</span>
                    <div class="estrellas" id="star-artico">â˜†â˜†â˜†</div>
                </div>
                 <div class="categoria-btn" id="cat-bosque" onclick="window.cambiarCategoria('bosque')">
                    <span>ğŸŒ³ Bosque ğŸ”’</span>
                    <div class="estrellas" id="star-bosque">â˜†â˜†â˜†</div>
                </div>
                 <div class="categoria-btn" id="cat-montana" onclick="window.cambiarCategoria('montana')">
                    <span>â›°ï¸ MontaÃ±a ğŸ”’</span>
                    <div class="estrellas" id="star-montana">â˜†â˜†â˜†</div>
                </div>
                 <div class="categoria-btn" id="cat-rio" onclick="window.cambiarCategoria('rio')">
                    <span>ğŸï¸ RÃ­o ğŸ”’</span>
                    <div class="estrellas" id="star-rio">â˜†â˜†â˜†</div>
                </div>
            </div>
        </div>

        <div id="area-juego">
            
            <div class="header-nivel">
                <div id="barra-progreso-stats">
                    
                    <div class="puntos-totales-lateral">
                        âœ¨ TOTAL<span id="puntuacion-total-lateral">0</span>
                    </div>

                    <div class="titulo-stats" style="display: flex; align-items: center; justify-content: center; gap: 15px;">
                        <button id="btn-nivel-ant" onclick="window.cambiarNivelManual(-1)" style="background:none; border:none; font-size: 0.8em; cursor: pointer; color: white; opacity: 0.5;">
                            â—€ï¸
                        </button>
                        
                        <div>
                            <span id="titulo-nivel-emoji">ğŸ¡</span> 
                            <span id="titulo-nivel">GRANJA - NIVEL 1</span>
                        </div>

                        <button id="btn-nivel-sig" onclick="window.cambiarNivelManual(1)" style="background:none; border:none; font-size: 0.8em; cursor: pointer; color: white; opacity: 0.5;">
                            â–¶ï¸
                        </button>
                    </div>

                    <div class="stats-cajas">
                        <div class="stat-box" id="stat-puntos">
                            <div class="stat-label">PUNTOS NIVEL</div>
                            <div class="stat-valor" id="puntos-nivel">0</div>
                        </div>
                        <div class="stat-box" id="stat-meta">
                            <div class="stat-label">META</div>
                            <div class="stat-valor" id="meta-nivel">0</div>
                        </div>
                        <div class="stat-box" id="stat-listos">
                            <div class="stat-label">ANIMALES LISTOS</div>
                            <div class="stat-valor" id="listos-nivel">0/0</div>
                        </div>
                    </div>
                    
                    <div class="progreso-bar-contenedor">
                        <div id="progreso-bar">
                            <span id="progreso-porcentaje">0%</span>
                        </div>
                    </div>
                </div>
                <span id="instruccion">Â¡Arrastra la ficha correcta al animal!</span>
                <div id="mensaje-motivador" style="font-size: 1.5em; font-weight: bold; height: 30px; margin-top: 10px; color: #6C5CE7;"></div>
                
            </div>

            <div id="tablero"></div>
        </div>

        <div id="panel-opciones"></div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>